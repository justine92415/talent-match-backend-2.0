# develop åˆ†æ”¯è‡ªå‹•å‰µå»º PR åˆ° main
name: Develop to Main PR

on:
  push:
    branches:
      - develop
  workflow_dispatch: # æ”¯æ´æ‰‹å‹•è§¸ç™¼
  repository_dispatch: # æ”¯æ´å¾å…¶ä»–å·¥ä½œæµç¨‹è§¸ç™¼

permissions:
  contents: read
  pull-requests: write

jobs:
  create-main-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Get current time
        id: time
        run: echo "current_time=$(date +'%Y-%m-%d %H:%M:%S')" >> $GITHUB_OUTPUT

      - name: Create Pull Request to main
        uses: repo-sync/pull-request@v2
        with:
          source_branch: develop
          destination_branch: main
          pr_title: 'ğŸš€ Release: develop â†’ main'
          pr_body: |
            ## ç™¼å¸ƒ Pull Request

            **ä¾†æºåˆ†æ”¯ï¼š** `develop`  
            **ç›®æ¨™åˆ†æ”¯ï¼š** `main`  
            **å»ºç«‹æ™‚é–“ï¼š** ${{ steps.time.outputs.current_time }}

            ### èªªæ˜
            æ­¤ PR åŒ…å« develop åˆ†æ”¯çš„æœ€æ–°è®Šæ›´ï¼Œæº–å‚™ç™¼å¸ƒåˆ° main åˆ†æ”¯ã€‚

            ### æª¢æŸ¥é …ç›®
            - [ ] åŠŸèƒ½æ¸¬è©¦å®Œæˆ
            - [ ] ç¨‹å¼ç¢¼å¯©æŸ¥å®Œæˆ
            - [ ] æº–å‚™ç™¼å¸ƒ

            ---
            ğŸ¤– è«‹æ‰‹å‹•æª¢æŸ¥å¾Œåˆä½µåˆ° main åˆ†æ”¯
          pr_label: 'release'
          github_token: ${{ secrets.GITHUB_TOKEN }}
