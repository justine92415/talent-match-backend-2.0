{
  "info": {
    "name": "Talent Match API 2.0",
    "description": "Talent Match 後端 API 完整集合 - 包含所有認證、課程、教師、購物車、訂單等功能的 API 端點\n\n🆕 **v2.3 新功能**：\n- 預約確認流程：學生預約後需要教師確認\n- 教師確認/拒絕預約 API\n- 預約狀態自動過期機制（隔天預約12小時內回應，其他24小時內回應）\n- PENDING 狀態預約管理\n\n🔧 **v2.2 功能**：\n- 管理員課程申請列表 API\n- 課程狀態篩選（submitted, approved, rejected, draft, published, archived）\n- 管理員 token 自動保存\n- 增強的測試腳本和變數管理\n\n🔧 **v2.1 功能**：\n- 整合式課程建立 API (支援同時上傳圖片和設定價格方案)\n- multipart/form-data 支援檔案上傳\n- 資料庫交易確保原子性操作\n- 自動錯誤恢復和資源清理",
    "version": "2.3.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// 設定常用變數 - 使用環境變數",
          "if (!pm.globals.get('base_url') && pm.environment.get('base_url')) {",
          "  pm.globals.set('base_url', pm.environment.get('base_url'));",
          "}",
          "",
          "// 檢查是否需要自動帶入 access_token",
          "const currentUrl = pm.request.url.toString();",
          "const isAuthEndpoint = currentUrl.includes('/auth/login') || currentUrl.includes('/auth/register') || currentUrl.includes('/auth/forgot-password') || currentUrl.includes('/auth/reset-password');",
          "const isPublicEndpoint = currentUrl.includes('/public') || (currentUrl.includes('/courses') && pm.request.method === 'GET' && !currentUrl.includes('price-options'));",
          "",
          "// 如果不是認證端點或公開端點，且有 access_token，自動設置 Authorization header",
          "if (!isAuthEndpoint && !isPublicEndpoint) {",
          "  const accessToken = pm.globals.get('access_token');",
          "  if (accessToken) {",
          "    pm.request.headers.add({",
          "      key: 'Authorization',",
          "      value: `Bearer ${accessToken}`",
          "    });",
          "    console.log('已自動帶入 Authorization header');",
          "  }",
          "}",
          "",
          "// 不修改 URL，保持原始配置"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// 檢查是否為認證相關 API 回應",
          "if (pm.response.code === 200 || pm.response.code === 201) {",
          "  try {",
          "    const jsonData = pm.response.json();",
          "    ",
          "    // 自動儲存 access_token 和 refresh_token（登入、註冊、刷新 token 時）",
          "    if (jsonData && jsonData.data) {",
          "      if (jsonData.data.access_token) {",
          "        pm.environment.set('access_token', jsonData.data.access_token);",
          "        console.log('✅ 已儲存 access_token:', jsonData.data.access_token.substring(0, 20) + '...');",
          "      }",
          "      ",
          "      if (jsonData.data.refresh_token) {",
          "        pm.environment.set('refresh_token', jsonData.data.refresh_token);",
          "        console.log('✅ 已儲存 refresh_token:', jsonData.data.refresh_token.substring(0, 20) + '...');",
          "      }",
          "      ",
          "      if (jsonData.data.expires_in) {",
          "        // 計算 token 過期時間",
          "        const expiresAt = new Date(Date.now() + (jsonData.data.expires_in * 1000));",
          "        pm.environment.set('token_expires_at', expiresAt.toISOString());",
          "        console.log('✅ Token 將於', expiresAt.toLocaleString(), '過期');",
          "      }",
          "    }",
          "  } catch (e) {",
          "    // 如果不是 JSON 回應，跳過",
          "  }",
          "}",
          "",
          "// 檢查回應狀態",
          "pm.test('Status code is successful', function () {",
          "  pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
          "});",
          "",
          "// 檢查回應格式（只有 JSON 回應才檢查）",
          "if (pm.response.headers.get('Content-Type') && pm.response.headers.get('Content-Type').includes('application/json')) {",
          "  pm.test('Response has correct format', function () {",
          "    const jsonData = pm.response.json();",
          "    pm.expect(jsonData).to.have.property('status');",
          "    pm.expect(jsonData).to.have.property('message');",
          "  });",
          "}",
          "",
          "// 如果是 401 錯誤且有 refresh_token，提示使用者可能需要刷新 token",
          "if (pm.response.code === 401) {",
          "  const refreshToken = pm.globals.get('refresh_token');",
          "  if (refreshToken) {",
          "    console.log('⚠️  收到 401 錯誤，建議使用 refresh token API 刷新 access token');",
          "  } else {",
          "    console.log('⚠️  收到 401 錯誤，請先登入取得 token');",
          "  }",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "",
      "type": "string"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string",
      "description": "管理員 JWT token，從管理員登入 API 獲取"
    }
  ],
  "item": [
    {
      "name": "⚙️ 工具函式",
      "item": [
        {
          "name": "🧹 清理所有 Token",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 清理所有認證相關的全域變數",
                  "pm.globals.unset('access_token');",
                  "pm.globals.unset('refresh_token');",
                  "pm.globals.unset('user_id');",
                  "pm.globals.unset('user_uuid');",
                  "pm.globals.unset('user_role');",
                  "pm.globals.unset('token_expires_at');",
                  "",
                  "// 清理管理員相關變數",
                  "pm.globals.unset('admin_token');",
                  "pm.globals.unset('admin_id');",
                  "pm.globals.unset('admin_username');",
                  "pm.collectionVariables.unset('admin_token');",
                  "",
                  "console.log('🧹 已清理所有認證資料（包含管理員）');",
                  "console.log('現在可以重新登入或註冊');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "清理工具：移除所有儲存的認證資料"
          }
        },
        {
          "name": "📊 檢視目前 Token 狀態",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 顯示目前的認證狀態",
                  "const accessToken = pm.globals.get('access_token');",
                  "const refreshToken = pm.globals.get('refresh_token');",
                  "const userRole = pm.globals.get('user_role');",
                  "const expiresAt = pm.globals.get('token_expires_at');",
                  "",
                  "console.log('📊 目前認證狀態：');",
                  "console.log('Access Token:', accessToken ? (accessToken.substring(0, 20) + '...') : '❌ 未設定');",
                  "console.log('Refresh Token:', refreshToken ? (refreshToken.substring(0, 20) + '...') : '❌ 未設定');",
                  "console.log('使用者角色:', userRole || '❌ 未設定');",
                  "",
                  "if (expiresAt) {",
                  "    const expiry = new Date(expiresAt);",
                  "    const now = new Date();",
                  "    const isExpired = now > expiry;",
                  "    console.log('Token 狀態:', isExpired ? '❌ 已過期' : '✅ 有效');",
                  "    console.log('過期時間:', expiry.toLocaleString());",
                  "} else {",
                  "    console.log('過期時間: ❌ 未設定');",
                  "}",
                  "",
                  "// 不實際發送請求",
                  "pm.execution.skipRequest();"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "檢視工具：顯示目前的認證狀態和 Token 資訊"
          }
        }
      ],
      "description": "便利工具，用於管理認證狀態和除錯"
    },
    {
      "name": "標籤管理 (Tags)",
      "item": [
        {
          "name": "取得所有標籤清單",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 標籤清單取得測試",
                  "pm.test('狀態碼應為 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('回應格式應正確', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status', true);",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('標籤資料結構應正確', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.length > 0) {",
                  "        const firstTag = jsonData.data[0];",
                  "        pm.expect(firstTag).to.have.property('id');",
                  "        pm.expect(firstTag).to.have.property('main_category');",
                  "        pm.expect(firstTag).to.have.property('sub_category');",
                  "        pm.expect(firstTag).to.have.property('icon_url');",
                  "        pm.expect(firstTag.sub_category).to.be.an('array');",
                  "        ",
                  "        // 檢查次分類格式",
                  "        if (firstTag.sub_category.length > 0) {",
                  "            const firstSubCategory = firstTag.sub_category[0];",
                  "            pm.expect(firstSubCategory).to.have.property('id');",
                  "            pm.expect(firstSubCategory).to.have.property('name');",
                  "        }",
                  "    }",
                  "});",
                  "",
                  "console.log('✅ 標籤清單取得成功');"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/tags",
              "host": ["{{base_url}}"],
              "path": ["api", "tags"]
            },
            "description": "取得系統中所有啟用的主分類和次分類標籤清單，供前端選單使用。此為公開 API，不需認證。"
          },
          "response": [
            {
              "name": "成功取得標籤清單",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/tags",
                  "host": ["{{base_url}}"],
                  "path": ["api", "tags"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json; charset=utf-8"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": true,\n  \"message\": \"取得標籤清單成功\",\n  \"data\": [\n    {\n      \"id\": 1,\n      \"main_category\": \"藝術創作\",\n      \"sub_category\": [\n        {\n          \"id\": 1,\n          \"name\": \"水彩畫\"\n        },\n        {\n          \"id\": 2,\n          \"name\": \"油畫\"\n        },\n        {\n          \"id\": 3,\n          \"name\": \"素描\"\n        }\n      ],\n      \"icon_url\": \"assets/images/tag-icon/draw_abstract.svg\"\n    },\n    {\n      \"id\": 2,\n      \"main_category\": \"舞蹈表演\",\n      \"sub_category\": [\n        {\n          \"id\": 4,\n          \"name\": \"芭蕾舞\"\n        },\n        {\n          \"id\": 5,\n          \"name\": \"現代舞\"\n        }\n      ],\n      \"icon_url\": \"assets/images/tag-icon/dance.svg\"\n    }\n  ]\n}"
            }
          ]
        }
      ],
      "description": "取得系統標籤相關資訊，包含主分類和次分類清單"
    },
    {
      "name": "認證管理 (Auth)",
      "item": [
        {
          "name": "使用者註冊",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 註冊專用測試腳本",
                  "pm.test('註冊狀態碼應為 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('回應應包含所需的認證資料', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status', 'success');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('access_token');",
                  "    pm.expect(jsonData.data).to.have.property('refresh_token');",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "});",
                  "",
                  "// 儲存認證資料到環境變數",
                  "if (pm.response.code === 201) {",
                  "    try {",
                  "        const responseData = pm.response.json();",
                  "        ",
                  "        if (responseData.data) {",
                  "            // 儲存 tokens",
                  "            pm.environment.set('access_token', responseData.data.access_token);",
                  "            pm.environment.set('refresh_token', responseData.data.refresh_token);",
                  "            ",
                  "            // 儲存使用者資訊",
                  "            pm.environment.set('user_id', responseData.data.user.id);",
                  "            pm.environment.set('user_uuid', responseData.data.user.uuid);",
                  "            pm.environment.set('user_role', responseData.data.user.role);",
                  "            ",
                  "            // 計算 token 過期時間",
                  "            if (responseData.data.expires_in) {",
                  "                const expiresAt = new Date(Date.now() + (responseData.data.expires_in * 1000));",
                  "                pm.environment.set('token_expires_at', expiresAt.toISOString());",
                  "            }",
                  "            ",
                  "            console.log('🎉 註冊成功！');",
                  "            console.log('✅ Access Token:', responseData.data.access_token.substring(0, 20) + '...');",
                  "            console.log('✅ Refresh Token:', responseData.data.refresh_token.substring(0, 20) + '...');",
                  "            console.log('✅ 使用者:', responseData.data.user.nick_name, '(' + responseData.data.user.role + ')');",
                  "        }",
                  "    } catch (error) {",
                  "        console.error('❌ 儲存註冊資料時發生錯誤:', error);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test001@gmail.com\",\n  \"password\": \"1qaz2wsx\",\n  \"nick_name\": \"測試使用者001\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "使用者註冊 API，支援學生和教師角色註冊"
          }
        },
        {
          "name": "使用者登入",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 登入專用測試腳本",
                  "pm.test('登入狀態碼應為 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('回應應包含所需的認證資料', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status', 'success');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('access_token');",
                  "    pm.expect(jsonData.data).to.have.property('refresh_token');",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "});",
                  "",
                  "// 儲存認證資料到環境變數",
                  "if (pm.response.code === 200) {",
                  "    try {",
                  "        const responseData = pm.response.json();",
                  "        ",
                  "        if (responseData.data) {",
                  "            // 儲存 tokens",
                  "            pm.environment.set('access_token', responseData.data.access_token);",
                  "            pm.environment.set('refresh_token', responseData.data.refresh_token);",
                  "            ",
                  "            // 儲存使用者資訊",
                  "            pm.environment.set('user_id', responseData.data.user.id);",
                  "            pm.environment.set('user_uuid', responseData.data.user.uuid);",
                  "            pm.environment.set('user_role', responseData.data.user.role);",
                  "            ",
                  "            // 計算 token 過期時間",
                  "            if (responseData.data.expires_in) {",
                  "                const expiresAt = new Date(Date.now() + (responseData.data.expires_in * 1000));",
                  "                pm.environment.set('token_expires_at', expiresAt.toISOString());",
                  "            }",
                  "            ",
                  "            console.log('🎉 登入成功！');",
                  "            console.log('✅ Access Token:', responseData.data.access_token.substring(0, 20) + '...');",
                  "            console.log('✅ Refresh Token:', responseData.data.refresh_token.substring(0, 20) + '...');",
                  "            console.log('✅ 使用者:', responseData.data.user.nick_name, '(' + responseData.data.user.role + ')');",
                  "        }",
                  "    } catch (error) {",
                  "        console.error('❌ 儲存登入資料時發生錯誤:', error);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"teacher001@gmail.com\",\n  \"password\": \"1qaz2wsx\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "使用者登入，返回 JWT Token"
          }
        },
        {
          "name": "刷新 Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 刷新 Token 專用測試腳本",
                  "pm.test('Token 刷新狀態碼應為 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('回應應包含新的認證資料', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status', 'success');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('access_token');",
                  "    pm.expect(jsonData.data).to.have.property('refresh_token');",
                  "});",
                  "",
                  "// 儲存新的認證資料到全域變數",
                  "if (pm.response.code === 200) {",
                  "    try {",
                  "        const responseData = pm.response.json();",
                  "        ",
                  "        if (responseData.data) {",
                  "            // 更新 tokens",
                  "            pm.environment.set('access_token', responseData.data.access_token);",
                  "            pm.environment.set('refresh_token', responseData.data.refresh_token);",
                  "            ",
                  "            // 計算新的 token 過期時間",
                  "            if (responseData.data.expires_in) {",
                  "                const expiresAt = new Date(Date.now() + (responseData.data.expires_in * 1000));",
                  "                pm.environment.set('token_expires_at', expiresAt.toISOString());",
                  "            }",
                  "            ",
                  "            console.log('🔄 Token 刷新成功！');",
                  "            console.log('✅ 新的 Access Token:', responseData.data.access_token.substring(0, 20) + '...');",
                  "            console.log('✅ 新的 Refresh Token:', responseData.data.refresh_token.substring(0, 20) + '...');",
                  "        }",
                  "    } catch (error) {",
                  "        console.error('❌ 儲存刷新後的認證資料時發生錯誤:', error);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "使用 Refresh Token 刷新 Access Token"
          }
        },
        {
          "name": "取得個人資料",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "取得目前登入使用者的個人資料"
          }
        },
        {
          "name": "更新個人資料",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"王小明\",\n  \"nick_name\": \"小明\",\n  \"birthday\": \"1990-01-01\",\n  \"contact_phone\": \"0912345678\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "更新個人資料"
          }
        },
        {
          "name": "忘記密碼",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test001@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/forgot-password",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "forgot-password"]
            },
            "description": "發送重設密碼郵件"
          }
        },
        {
          "name": "重設密碼",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset_token_here\",\n  \"new_password\": \"newPassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/reset-password",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "reset-password"]
            },
            "description": "使用重設令牌重設密碼"
          }
        },
        {
          "name": "刪除帳號",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 刪除帳號專用測試腳本",
                  "pm.test('刪除帳號狀態碼應為 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 帳號刪除成功後清理所有認證資料",
                  "if (pm.response.code === 200) {",
                  "    pm.globals.unset('access_token');",
                  "    pm.globals.unset('refresh_token');",
                  "    pm.globals.unset('user_id');",
                  "    pm.globals.unset('user_uuid');",
                  "    pm.globals.unset('user_role');",
                  "    pm.globals.unset('token_expires_at');",
                  "    ",
                  "    console.log('🗑️  帳號刪除成功，已清理所有認證資料');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "刪除使用者帳號（軟刪除）"
          }
        }
      ],
      "description": "使用者認證相關 API，包含註冊、登入、Token 管理等功能"
    },
    {
      "name": "教師管理 (Teachers)",
      "item": [
        {
          "name": "申請成為教師",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"台北市\",\n  \"district\": \"中正區\",\n  \"address\": \"中山南路5號\",\n  \"main_category_id\": 1,\n  \"sub_category_ids\": [1, 2, 3],\n  \"introduction\": \"我是一位經驗豐富的教師，擁有10年以上的教學經驗，專精於程式設計領域，能夠以淺顯易懂的方式教導學生掌握複雜的技術概念，致力於培養學生的邏輯思維和問題解決能力。\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/apply",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "apply"]
            },
            "description": "建立新的教師申請，提交地址資訊、教授科目、專長和自我介紹資料"
          }
        },
        {
          "name": "查詢教師申請狀態",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/apply-status",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "apply-status"]
            },
            "description": "取得使用者的教師申請狀態和所有步驟的表單資料，用於前端判斷申請進度和預填表單"
          }
        },
        {
          "name": "取得教師基本資訊",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/basic-info",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "basic-info"]
            },
            "description": "取得已通過申請的教師基本資訊，主要用於教師個人資料管理"
          }
        },
        {
          "name": "更新教師基本資訊",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"台北市\",\n  \"district\": \"中正區\",\n  \"address\": \"中山南路5號\",\n  \"main_category_id\": 1,\n  \"sub_category_ids\": [1, 2, 3],\n  \"introduction\": \"我是一位經驗豐富的教師，擁有10年以上的教學經驗，專精於程式設計領域，能夠以淺顯易懂的方式教導學生掌握複雜的技術概念。\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/basic-info",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "basic-info"]
            },
            "description": "更新已通過申請的教師基本資訊，專門用於個人資料管理"
          }
        },
        {
          "name": "更新教師基本資訊",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"台北市\",\n  \"district\": \"中正區\",\n  \"address\": \"中山南路5號\",\n  \"main_category_id\": 1,\n  \"sub_category_ids\": [1, 2, 3],\n  \"introduction\": \"我是一位經驗豐富的教師，擁有10年以上的教學經驗，專精於程式設計領域，能夠以淺顯易懂的方式教導學生掌握複雜的技術概念。\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/basic-info",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "basic-info"]
            },
            "description": "更新教師申請的基本資訊，用於多步驟表單的第一步"
          }
        },
        {
          "name": "重新提交申請",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/resubmit",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "resubmit"]
            },
            "description": "重新提交教師申請"
          }
        },
        {
          "name": "提交教師申請",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/submit",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "submit"]
            },
            "description": "最終提交教師申請"
          }
        },
        {
          "name": "取得教師個人檔案",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "profile"]
            },
            "description": "取得教師完整個人檔案"
          }
        },
        {
          "name": "更新教師個人檔案",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"台北市\",\n  \"district\": \"中正區\",\n  \"address\": \"中山南路5號\",\n  \"main_category_id\": 1,\n  \"sub_category_ids\": [1, 2, 3],\n  \"introduction\": \"我是一位經驗豐富的教師，擁有10年以上的教學經驗。\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "profile"]
            },
            "description": "更新教師個人檔案"
          }
        },
        {
          "name": "取得工作經驗列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/work-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "work-experiences"]
            },
            "description": "取得教師工作經驗列表"
          }
        },
        {
          "name": "新增工作經驗",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"work_experiences\": [\n    {\n      \"company_name\": \"某某科技公司\",\n      \"city\": \"台北市\",\n      \"district\": \"信義區\",\n      \"job_category\": \"軟體開發\",\n      \"job_title\": \"資深工程師\",\n      \"is_working\": false,\n      \"start_year\": 2020,\n      \"start_month\": 1,\n      \"end_year\": 2022,\n      \"end_month\": 12\n    },\n    {\n      \"company_name\": \"另一家公司\",\n      \"city\": \"新北市\",\n      \"district\": \"板橋區\",\n      \"job_category\": \"產品管理\",\n      \"job_title\": \"產品經理\",\n      \"is_working\": true,\n      \"start_year\": 2023,\n      \"start_month\": 1,\n      \"end_year\": null,\n      \"end_month\": null\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/work-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "work-experiences"]
            },
            "description": "批次新增工作經驗記錄，統一使用陣列格式，支援一次新增多筆工作經驗"
          }
        },
        {
          "name": "更新工作經驗",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"company_name\": \"某某科技公司\",\n  \"city\": \"台北市\",\n  \"district\": \"信義區\",\n  \"job_category\": \"軟體開發\",\n  \"job_title\": \"資深工程師\",\n  \"is_working\": false,\n  \"start_year\": 2020,\n  \"start_month\": 1,\n  \"end_year\": 2023,\n  \"end_month\": 6\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/work-experiences/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "work-experiences", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新指定的工作經驗"
          }
        },
        {
          "name": "刪除工作經驗",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/work-experiences/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "work-experiences", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除指定的工作經驗"
          }
        },
        {
          "name": "批次新增或更新工作經驗",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"work_experiences\": [\n    {\n      \"id\": 123,\n      \"company_name\": \"更新後的公司名稱\",\n      \"city\": \"台北市\",\n      \"district\": \"信義區\",\n      \"job_category\": \"軟體開發\",\n      \"job_title\": \"資深工程師\",\n      \"is_working\": false,\n      \"start_year\": 2020,\n      \"start_month\": 1,\n      \"end_year\": 2023,\n      \"end_month\": 6\n    },\n    {\n      \"company_name\": \"新公司\",\n      \"city\": \"新北市\",\n      \"district\": \"板橋區\",\n      \"job_category\": \"產品管理\",\n      \"job_title\": \"產品經理\",\n      \"is_working\": true,\n      \"start_year\": 2023,\n      \"start_month\": 7,\n      \"end_year\": null,\n      \"end_month\": null\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/work-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "work-experiences"]
            },
            "description": "批次處理工作經驗記錄，支援同時新增和更新操作。有 id 的記錄會被更新，沒有 id 的記錄會被新增。"
          }
        },
        {
          "name": "取得學習經歷列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/learning-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "learning-experiences"]
            },
            "description": "取得教師學習經歷列表"
          }
        },
        {
          "name": "批次新增學習經歷",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"learning_experiences\": [\n    {\n      \"degree\": \"學士\",\n      \"school_name\": \"某某大學\",\n      \"department\": \"資訊工程學系\",\n      \"region\": true,\n      \"is_in_school\": false,\n      \"start_year\": 2016,\n      \"start_month\": 9,\n      \"end_year\": 2020,\n      \"end_month\": 6\n    },\n    {\n      \"degree\": \"碩士\",\n      \"school_name\": \"某某研究所\",\n      \"department\": \"資訊管理學系\",\n      \"region\": true,\n      \"is_in_school\": false,\n      \"start_year\": 2020,\n      \"start_month\": 9,\n      \"end_year\": 2022,\n      \"end_month\": 6\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/learning-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "learning-experiences"]
            },
            "description": "批次新增學習經歷，支援一次新增多筆學習經歷記錄"
          }
        },
        {
          "name": "更新學習經歷",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"degree\": \"碩士\",\n  \"school_name\": \"某某大學\",\n  \"department\": \"資訊管理學系\",\n  \"region\": true,\n  \"is_in_school\": false,\n  \"start_year\": 2020,\n  \"start_month\": 9,\n  \"end_year\": 2022,\n  \"end_month\": 6\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/learning-experiences/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "learning-experiences", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新指定的學習經歷"
          }
        },
        {
          "name": "批次新增或更新學習經歷",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"learning_experiences\": [\n    {\n      \"id\": 123,\n      \"degree\": \"碩士\",\n      \"school_name\": \"某某大學\",\n      \"department\": \"資訊管理學系碩士班\",\n      \"region\": true,\n      \"is_in_school\": false,\n      \"start_year\": 2020,\n      \"start_month\": 9,\n      \"end_year\": 2022,\n      \"end_month\": 6\n    },\n    {\n      \"degree\": \"博士\",\n      \"school_name\": \"另一所大學\",\n      \"department\": \"電腦科學系\",\n      \"region\": false,\n      \"is_in_school\": true,\n      \"start_year\": 2022,\n      \"start_month\": 9,\n      \"end_year\": null,\n      \"end_month\": null\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/learning-experiences",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "learning-experiences"]
            },
            "description": "批次處理學習經歷記錄，支援同時新增和更新操作。有 id 的記錄會被更新，沒有 id 的記錄會被新增。"
          }
        },
        {
          "name": "刪除學習經歷",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/learning-experiences/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "learning-experiences", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除指定的學習經歷"
          }
        },
        {
          "name": "取得證書列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/certificates",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "certificates"]
            },
            "description": "取得教師證書列表"
          }
        },
        {
          "name": "批次新增證書",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"certificates\": [\n    {\n      \"verifying_institution\": \"某某認證機構\",\n      \"license_name\": \"Python 程式設計證照\",\n      \"holder_name\": \"王小明\",\n      \"license_number\": \"PYTHON123456\",\n      \"file_path\": \"\",\n      \"category_id\": 1,\n      \"issue_year\": 2023,\n      \"issue_month\": 6\n    },\n    {\n      \"verifying_institution\": \"另一個認證機構\",\n      \"license_name\": \"Java 程式設計證照\",\n      \"holder_name\": \"王小明\",\n      \"license_number\": \"JAVA789012\",\n      \"file_path\": \"\",\n      \"category_id\": 1,\n      \"issue_year\": 2023,\n      \"issue_month\": 8\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/certificates",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "certificates"]
            },
            "description": "批次新增教學證書，支援一次新增多筆證書記錄"
          }
        },
        {
          "name": "更新證書",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"verifying_institution\": \"某某認證機構\",\n  \"license_name\": \"Java 程式設計證照\",\n  \"holder_name\": \"王小明\",\n  \"license_number\": \"JAVA123456\",\n  \"file_path\": \"/uploads/certificates/cert456.pdf\",\n  \"category_id\": 1,\n  \"issue_year\": 2023,\n  \"issue_month\": 6\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/certificates/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "certificates", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新指定的證書"
          }
        },
        {
          "name": "批次新增或更新證書",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"certificates\": [\n    {\n      \"id\": 456,\n      \"verifying_institution\": \"更新後的認證機構\",\n      \"license_name\": \"Advanced Java 程式設計證照\",\n      \"holder_name\": \"王小明\",\n      \"license_number\": \"JAVA123456\",\n      \"file_path\": \"\",\n      \"category_id\": 1,\n      \"issue_year\": 2023,\n      \"issue_month\": 6\n    },\n    {\n      \"verifying_institution\": \"新認證機構\",\n      \"license_name\": \"React 前端開發證照\",\n      \"holder_name\": \"王小明\",\n      \"license_number\": \"REACT789012\",\n      \"file_path\": \"\",\n      \"category_id\": 2,\n      \"issue_year\": 2024,\n      \"issue_month\": 1\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/certificates",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "certificates"]
            },
            "description": "批次處理證書記錄，支援同時新增和更新操作。有 id 的記錄會被更新，沒有 id 的記錄會被新增。"
          }
        },
        {
          "name": "刪除證書",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/certificates/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "certificates", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除指定的證書"
          }
        },
        {
          "name": "取得教師時間表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/schedule",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "schedule"]
            },
            "description": "取得教師可用時間表 - 週次格式"
          },
          "response": [
            {
              "name": "成功回應 - 週次格式",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/teachers/schedule",
                  "host": ["{{base_url}}"],
                  "path": ["api", "teachers", "schedule"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"success\",\n    \"message\": \"取得教師時段設定成功\",\n    \"data\": {\n        \"weekly_schedule\": {\n            \"1\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\"],\n            \"3\": [\"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\"],\n            \"5\": [\"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\"],\n            \"6\": [\"17:00\", \"19:00\", \"20:00\"]\n        },\n        \"total_slots\": 19,\n        \"slots_by_day\": {\n            \"1\": 7,\n            \"3\": 5,\n            \"5\": 5,\n            \"6\": 3\n        },\n        \"updated_count\": 0,\n        \"created_count\": 0,\n        \"deleted_count\": 0\n    }\n}"
            }
          ]
        },
        {
          "name": "更新教師時間表 (週次格式)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"weekly_schedule\": {\n    \"1\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\"],\n    \"2\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\"],\n    \"4\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\"],\n    \"5\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"17:00\", \"19:00\"],\n    \"6\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\", \"20:00\"]\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/teachers/schedule",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "schedule"]
            },
            "description": "更新教師可用時段 - 新版週次格式\n\n**🆕 新版格式特色**：\n- 使用週次習慣 (1=週一, 7=週日)\n- 直接使用時間點陣列，每個時間點代表1小時時段\n- 支援標準時段：上午 09:00-11:00、下午 13:00-17:00、晚上 19:00-20:00\n- 更直觀的前端開發體驗\n\n**週次對應**：\n- \"1\": 週一, \"2\": 週二, \"3\": 週三, \"4\": 週四\n- \"5\": 週五, \"6\": 週六, \"7\": 週日\n\n**標準時段**：\n- 上午：09:00, 10:00, 11:00\n- 下午：13:00, 14:00, 15:00, 16:00, 17:00\n- 晚上：19:00, 20:00"
          },
          "response": [
            {
              "name": "成功回應 - 週次格式",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"weekly_schedule\": {\n    \"1\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\"],\n    \"2\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\"],\n    \"4\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\"],\n    \"5\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"17:00\", \"19:00\"],\n    \"6\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\", \"20:00\"]\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/teachers/schedule",
                  "host": ["{{base_url}}"],
                  "path": ["api", "teachers", "schedule"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"success\",\n    \"message\": \"教師時段設定更新成功\",\n    \"data\": {\n        \"weekly_schedule\": {\n            \"1\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\"],\n            \"2\": [\"09:00\", \"10:00\", \"13:00\", \"14:00\"],\n            \"4\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\"],\n            \"5\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"17:00\", \"19:00\"],\n            \"6\": [\"09:00\", \"10:00\", \"11:00\", \"13:00\", \"14:00\", \"15:00\", \"16:00\", \"17:00\", \"19:00\", \"20:00\"]\n        },\n        \"total_slots\": 37,\n        \"slots_by_day\": {\n            \"1\": 7,\n            \"2\": 4,\n            \"4\": 9,\n            \"5\": 7,\n            \"6\": 10\n        },\n        \"updated_count\": 0,\n        \"created_count\": 37,\n        \"deleted_count\": 0\n    }\n}"
            }
          ]
        },
        {
          "name": "檢查時間衝突",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/schedule/conflicts?start_time=2024-01-15T09:00:00&end_time=2024-01-15T10:00:00",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", "schedule", "conflicts"],
              "query": [
                {
                  "key": "start_time",
                  "value": "2024-01-15T09:00:00",
                  "description": "開始時間 (ISO 8601 格式)"
                },
                {
                  "key": "end_time", 
                  "value": "2024-01-15T10:00:00",
                  "description": "結束時間 (ISO 8601 格式)"
                }
              ]
            },
            "description": "檢查指定時間是否有衝突"
          }
        }
      ],
      "description": "教師管理相關 API，包含申請審核、學習經歷、證書管理等功能"
    },
    {
      "name": "課程管理 (Courses)",
      "item": [
        {
          "name": "課程列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses",
              "host": ["{{base_url}}"],
              "path": ["api", "courses"]
            },
            "description": "取得課程列表"
          }
        },
        {
          "name": "課程詳情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取得課程詳細資訊（需要教師身份認證，只能查看自己的課程或公開課程）"
          },
          "response": [
            {
              "name": "成功回應 - 基本課程資訊",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/courses/1",
                  "host": ["{{base_url}}"],
                  "path": ["api", "courses", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"success\",\n    \"message\": null,\n    \"data\": {\n        \"course\": {\n            \"id\": 1,\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"teacher_id\": 1,\n            \"name\": \"JavaScript 基礎入門課程\",\n            \"content\": \"<p>完整的 JavaScript 基礎教學，適合初學者</p>\",\n            \"main_image\": \"https://firebase.../course-image.jpg\",\n            \"rate\": 4.5,\n            \"review_count\": 12,\n            \"view_count\": 150,\n            \"purchase_count\": 25,\n            \"student_count\": 25,\n            \"main_category_id\": 1,\n            \"sub_category_id\": 2,\n            \"city\": \"台北市\",\n            \"district\": \"信義區\",\n            \"address\": \"台北市信義區信義路五段7號\",\n            \"survey_url\": \"https://forms.google.com/survey123\",\n            \"purchase_message\": \"請準備筆記本，課程需要大量練習\",\n            \"status\": \"published\",\n            \"submission_notes\": null,\n            \"archive_reason\": null,\n            \"created_at\": \"2024-01-15T10:30:00.000Z\",\n            \"updated_at\": \"2024-01-15T10:30:00.000Z\"\n        }\n    }\n}"
            }
          ]
        },
        {
          "name": "課程編輯資料",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id/edit",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "edit"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取得課程編輯資料（需要課程擁有者權限）\n\n**🎯 專門用途**：供前端編輯頁面初始化使用\n\n**權限限制**：\n- 只有課程擁有者可以存取\n- 需要教師身份認證\n- 不限課程狀態（可編輯任何狀態的自有課程）\n\n**回應特色**：\n- 包含完整課程基本資訊\n- 包含所有價格方案列表（按價格排序）\n- 一次 API 呼叫取得編輯所需的所有資料"
          },
          "response": [
            {
              "name": "成功回應 - 包含價格方案",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{access_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/courses/1/edit",
                  "host": ["{{base_url}}"],
                  "path": ["api", "courses", "1", "edit"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"success\",\n    \"message\": null,\n    \"data\": {\n        \"course\": {\n            \"id\": 1,\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"teacher_id\": 1,\n            \"name\": \"JavaScript 基礎入門課程\",\n            \"content\": \"<p>完整的 JavaScript 基礎教學，適合初學者</p>\",\n            \"main_image\": \"https://firebase.../course-image.jpg\",\n            \"rate\": 4.5,\n            \"review_count\": 12,\n            \"view_count\": 150,\n            \"purchase_count\": 25,\n            \"student_count\": 25,\n            \"main_category_id\": 1,\n            \"sub_category_id\": 2,\n            \"city\": \"台北市\",\n            \"district\": \"信義區\",\n            \"address\": \"台北市信義區信義路五段7號\",\n            \"survey_url\": \"https://forms.google.com/survey123\",\n            \"purchase_message\": \"請準備筆記本，課程需要大量練習\",\n            \"status\": \"draft\",\n            \"submission_notes\": null,\n            \"archive_reason\": null,\n            \"created_at\": \"2024-01-15T10:30:00.000Z\",\n            \"updated_at\": \"2024-01-15T10:30:00.000Z\",\n            \"price_options\": [\n                {\n                    \"id\": 1,\n                    \"uuid\": \"660e8400-e29b-41d4-a716-446655440000\",\n                    \"course_id\": 1,\n                    \"price\": 1500.00,\n                    \"quantity\": 1,\n                    \"is_active\": true,\n                    \"created_at\": \"2024-01-15T10:30:00.000Z\",\n                    \"updated_at\": \"2024-01-15T10:30:00.000Z\"\n                },\n                {\n                    \"id\": 2,\n                    \"uuid\": \"660e8400-e29b-41d4-a716-446655440001\",\n                    \"course_id\": 1,\n                    \"price\": 4200.00,\n                    \"quantity\": 3,\n                    \"is_active\": true,\n                    \"created_at\": \"2024-01-15T10:30:00.000Z\",\n                    \"updated_at\": \"2024-01-15T10:30:00.000Z\"\n                },\n                {\n                    \"id\": 3,\n                    \"uuid\": \"660e8400-e29b-41d4-a716-446655440002\",\n                    \"course_id\": 1,\n                    \"price\": 7500.00,\n                    \"quantity\": 6,\n                    \"is_active\": true,\n                    \"created_at\": \"2024-01-15T10:30:00.000Z\",\n                    \"updated_at\": \"2024-01-15T10:30:00.000Z\"\n                }\n            ]\n        }\n    }\n}"
            },
            {
              "name": "錯誤回應 - 非課程擁有者",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{other_user_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/courses/1/edit",
                  "host": ["{{base_url}}"],
                  "path": ["api", "courses", "1", "edit"]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"error\",\n    \"code\": \"UNAUTHORIZED_ACCESS\",\n    \"message\": \"只能編輯自己的課程\"\n}"
            }
          ]
        },
        {
          "name": "課程搜索",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses?page=1&limit=12",
              "host": ["{{base_url}}"],
              "path": ["api", "courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "12"
                }
              ]
            },
            "description": "取得教師自己的課程列表（需要認證）"
          }
        },
        {
          "name": "課程評價",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id/reviews?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "reviews"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取得課程評價列表（需要教師身份認證）"
          }
        },
        {
          "name": "新增課程 (支援圖片上傳)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "courseData",
                  "value": "{\n  \"name\": \"JavaScript 基礎入門課程\",\n  \"content\": \"<p>完整的 JavaScript 基礎教學，適合初學者學習程式設計</p>\",\n  \"main_category_id\": 1,\n  \"sub_category_id\": 2,\n  \"city\": \"台北市\",\n  \"district\": \"信義區\",\n  \"address\": \"台北市信義區信義路五段7號\",\n  \"survey_url\": \"https://forms.google.com/survey123\",\n  \"purchase_message\": \"請準備筆記本，課程需要大量練習\"\n}",
                  "type": "text",
                  "description": "課程基本資料 (JSON 格式)"
                },
                {
                  "key": "priceOptions",
                  "value": "[\n  {\n    \"price\": 1500,\n    \"quantity\": 1\n  },\n  {\n    \"price\": 4200,\n    \"quantity\": 3\n  },\n  {\n    \"price\": 7500,\n    \"quantity\": 6\n  }\n]",
                  "type": "text",
                  "description": "價格方案陣列 (JSON 格式)"
                },
                {
                  "key": "courseImage",
                  "type": "file",
                  "src": [],
                  "description": "課程主圖 (可選，支援 JPEG/PNG/WebP，最大 10MB)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/courses",
              "host": ["{{base_url}}"],
              "path": ["api", "courses"]
            },
            "description": "建立新課程 (支援同時上傳圖片和設定價格方案)\n\n**新功能特色：**\n- 支援 multipart/form-data 格式\n- 可同時上傳課程圖片 (最大 10MB)\n- 可同時建立多個價格方案\n- 原子性操作，確保資料一致性\n\n**表單欄位說明：**\n- courseData: 課程基本資料 (JSON 字串)\n- priceOptions: 價格方案陣列 (JSON 字串)\n- courseImage: 課程主圖檔案 (可選)\n\n**注意事項：**\n- 需要教師身份認證\n- 教師必須已通過審核\n- 圖片格式支援: JPEG, PNG, WebP\n- 建立失敗時會自動清理已上傳的圖片"
          }
        },
        {
          "name": "新增課程 (僅基本資料)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Python 程式設計基礎\",\n  \"content\": \"完整的Python程式設計入門課程，從基礎語法開始教學\",\n  \"main_category_id\": 1,\n  \"sub_category_id\": 2,\n  \"city\": \"新北市\",\n  \"district\": \"板橋區\",\n  \"address\": \"新北市板橋區文化路一段188號\",\n  \"survey_url\": \"https://forms.google.com/python-survey\",\n  \"purchase_message\": \"課程提供完整程式碼範例和練習題\",\n  \"priceOptions\": [\n    {\n      \"price\": 2000,\n      \"quantity\": 1\n    },\n    {\n      \"price\": 5500,\n      \"quantity\": 3\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses",
              "host": ["{{base_url}}"],
              "path": ["api", "courses"]
            },
            "description": "建立新課程 (傳統 JSON 格式，不包含圖片上傳)\n\n**適用情境：**\n- 僅需要建立課程基本資料和價格方案\n- 不需要上傳課程圖片\n- 使用傳統的 JSON API 格式\n\n**注意事項：**\n- 仍需要教師身份認證\n- 教師必須已通過審核\n- 價格方案直接包含在 JSON 中\n- 圖片可以稍後透過更新 API 或其他方式上傳"
          }
        },
        {
          "name": "更新課程（完整版 - 支援圖片上傳和價格方案）",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "courseImage",
                  "description": "課程主圖檔案 (可選，JPEG/PNG/WebP，最大10MB)",
                  "type": "file"
                },
                {
                  "key": "courseData",
                  "value": "{\"name\":\"Python 程式設計進階（更新）\",\"content\":\"進階Python程式設計課程，涵蓋物件導向、資料結構、設計模式等進階主題\",\"main_category_id\":1,\"sub_category_id\":2,\"city\":\"桃園市\",\"district\":\"中壢區\",\"address\":\"桃園市中壢區中大路300號\",\"survey_url\":\"https://forms.google.com/updated\",\"purchase_message\":\"更新後的購買須知：請準備好學習心情！\"}",
                  "description": "課程基本資料 (JSON 字串格式)",
                  "type": "text"
                },
                {
                  "key": "priceOptions",
                  "value": "[{\"price\":1500,\"quantity\":8},{\"price\":2800,\"quantity\":16}]",
                  "description": "價格方案陣列 (JSON 字串格式)，會完全替換現有方案",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "**完整課程更新功能** (支援圖片上傳和價格方案編輯)\n\n**功能特性**：\n- 🖼️ 支援課程圖片上傳和替換（自動清理舊圖片）\n- 💰 支援價格方案的完整替換\n- 📝 支援所有課程基本資料更新\n- ⚡ 原子性操作，確保資料一致性\n\n**請求格式**：multipart/form-data\n\n**參數說明**：\n- `courseImage`: 圖片檔案 (可選)\n- `courseData`: 課程資料 JSON\n- `priceOptions`: 價格方案 JSON 陣列\n\n**注意事項**：\n- 所有參數皆為選填，未提供的欄位保持原值\n- 如有上傳新圖片，舊圖片會自動清理\n- 價格方案會完全替換，不是增量更新\n- 需要教師身份認證且課程為自己所有"
          }
        },
        {
          "name": "刪除課程",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除課程（需要教師身份認證，只能刪除自己的未發布課程）"
          }
        },
        {
          "name": "提交課程審核",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"submission_notes\": \"課程已準備完成，請協助審核\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:id/submit",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "submit"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "提交課程審核（需要教師身份認證，只有草稿狀態且未在審核中的課程可提交）"
          }
        },
        {
          "name": "重新提交課程審核",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"submission_notes\": \"已根據回饋修正課程內容，請重新審核\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:id/resubmit",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "resubmit"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "重新提交課程審核（需要教師身份認證，只有被拒絕的課程可重新提交）"
          }
        },
        {
          "name": "發布課程",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id/publish",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "publish"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "發布課程（需要教師身份認證，只有草稿且審核通過的課程可發布）"
          }
        },
        {
          "name": "封存課程",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"archive_reason\": \"課程內容需要大幅更新，暫時下架\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:id/archive",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "archive"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "封存課程（需要教師身份認證，只有已發布的課程可封存）"
          }
        },
        {
          "name": "課程價格方案",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:courseId/price-options",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":courseId", "price-options"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "1"
                }
              ]
            },
            "description": "取得課程價格方案列表（需要教師身份認證）"
          }
        },
        {
          "name": "新增價格方案",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"單堂課程\",\n  \"price\": 1500,\n  \"quantity\": 1,\n  \"description\": \"一對一個人指導課程\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:courseId/price-options",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":courseId", "price-options"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "1"
                }
              ]
            },
            "description": "新增課程價格方案（需要教師身份認證）"
          }
        },
        {
          "name": "更新價格方案",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"單堂課程 (進階)\",\n  \"price\": 1800,\n  \"quantity\": 1,\n  \"description\": \"一對一進階課程指導\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/courses/:courseId/price-options/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":courseId", "price-options", ":id"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "1"
                },
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新價格方案（需要教師身份認證）"
          }
        },
        {
          "name": "刪除價格方案",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:courseId/price-options/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":courseId", "price-options", ":id"],
              "variable": [
                {
                  "key": "courseId",
                  "value": "1"
                },
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除價格方案（需要教師身份認證）"
          }
        },
        {
          "name": "查詢課程可預約時段",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// 檢查回應狀態",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// 檢查回應格式",
                  "pm.test('Response has correct structure', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData.status).to.eql('success');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('date');",
                  "    pm.expect(jsonData.data).to.have.property('available_slots');",
                  "    pm.expect(jsonData.data.available_slots).to.be.an('array');",
                  "});",
                  "",
                  "// 驗證時段格式",
                  "pm.test('Available slots have correct format with status', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.available_slots.length > 0) {",
                  "        const slot = jsonData.data.available_slots[0];",
                  "        pm.expect(slot).to.have.property('slot_id');",
                  "        pm.expect(slot).to.have.property('start_time');",
                  "        pm.expect(slot).to.have.property('end_time');",
                  "        pm.expect(slot).to.have.property('status');",
                  "        pm.expect(slot.slot_id).to.be.a('number');",
                  "        pm.expect(slot.start_time).to.match(/^\\d{2}:\\d{2}$/);",
                  "        pm.expect(slot.end_time).to.match(/^\\d{2}:\\d{2}$/);",
                  "        pm.expect(slot.status).to.be.oneOf(['available', 'unavailable']);",
                  "    }",
                  "});",
                  "",
                  "// 驗證所有時段都有狀態資訊",
                  "pm.test('All slots have status information', function () {",
                  "    const jsonData = pm.response.json();",
                  "    jsonData.data.available_slots.forEach((slot, index) => {",
                  "        pm.expect(slot.status, `Slot ${index + 1} should have status`).to.be.oneOf(['available', 'unavailable']);",
                  "    });",
                  "});",
                  "",
                  "// 記錄結果",
                  "const jsonData = pm.response.json();",
                  "console.log('查詢日期:', jsonData.data?.date);",
                  "const slots = jsonData.data?.available_slots || [];",
                  "console.log('總時段數量:', slots.length);",
                  "const availableSlots = slots.filter(s => s.status === 'available');",
                  "const unavailableSlots = slots.filter(s => s.status === 'unavailable');",
                  "console.log('可預約時段數量:', availableSlots.length);",
                  "console.log('不可預約時段數量:', unavailableSlots.length);",
                  "if (slots.length > 0) {",
                  "    console.log('時段狀態分佈:', slots.map(s => `${s.start_time}-${s.end_time}: ${s.status}`).join(', '));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/:id/available-slots?date=2025-09-23",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", ":id", "available-slots"],
              "query": [
                {
                  "key": "date",
                  "value": "2025-09-23",
                  "description": "查詢日期 (YYYY-MM-DD 格式)"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "2",
                  "description": "課程 ID"
                }
              ]
            },
            "description": "查詢指定課程在特定日期的所有時段及其狀態\n\n**功能說明**：\n- 查詢課程在指定日期教師設定的所有時段\n- 每個時段都會顯示狀態：available (可預約) 或 unavailable (不可預約)\n- 自動檢查每個時段是否已被預約 (包含 pending, reserved, completed 狀態)\n- 按時間順序返回結果\n\n**使用情境**：\n- 學生選擇日期後查詢該日所有時段狀態\n- 前端日曆組件顯示完整時段列表，根據狀態決定是否可點擊\n- 預約流程第一步：時段選擇與狀態檢查\n\n**回應說明**：\n- 成功時返回該日期的所有時段陣列，每個時段都包含狀態資訊\n- 如果當天教師沒有設定任何時段，available_slots 為空陣列\n- 每個時段包含 slot_id (用於預約), start_time, end_time, status\n- status 只有兩種值：'available' 或 'unavailable'\n\n**注意事項**：\n- 需要認證才能查詢\n- 只能查詢已發布 (published) 狀態的課程\n- 日期格式必須為 YYYY-MM-DD\n- 查詢結果包含所有時段，前端根據 status 決定是否可預約"
          }
        }
      ],
      "description": "課程管理相關 API，包含課程 CRUD、狀態管理、價格方案等功能\n\n**🆕 整合式課程建立 API**：\n- POST /api/courses (multipart/form-data) - 建立課程 + 圖片上傳 + 價格方案 (一次完成)\n- POST /api/courses (application/json) - 建立課程 (傳統格式，僅基本資料)\n\n**教師課程管理功能**：\n- PUT /api/courses/:id - 更新課程 (完整版：圖片上傳 + 價格方案編輯) 🆕\n- GET /api/courses/:id - 取得課程詳情 (瀏覽用，基本資訊)\n- GET /api/courses/:id/edit - 取得課程編輯資料 (包含價格方案) 🆕\n- GET /api/courses - 教師課程列表\n- DELETE /api/courses/:id - 刪除課程\n\n**課程狀態管理**：\n- POST /api/courses/:id/submit - 提交審核\n- POST /api/courses/:id/resubmit - 重新提交審核\n- POST /api/courses/:id/publish - 發布課程\n- POST /api/courses/:id/archive - 封存課程\n\n**價格方案管理**：\n- GET /api/courses/:courseId/price-options - 取得價格方案 (⚠️ 建議使用編輯端點)\n- POST /api/courses/:courseId/price-options - 新增價格方案\n- PUT /api/courses/:courseId/price-options/:id - 更新價格方案\n- DELETE /api/courses/:courseId/price-options/:id - 刪除價格方案\n\n**🎯 課程預約相關 API (新增)**：\n- GET /api/courses/:id/available-slots - 查詢課程可預約時段 🆕\n\n**🎯 v2.1 新增專用編輯端點**：\n- GET /api/courses/:id/edit - 專門供前端編輯頁面使用\n- 一次 API 呼叫取得完整編輯資料 (課程 + 價格方案)\n- 清晰分離瀏覽和編輯功能\n- 只有課程擁有者可以存取\n\n**✨ v2.2 完整編輯功能更新**：\n- PUT /api/courses/:id 現已支援 multipart/form-data 格式\n- 支援圖片上傳和自動替換 (舊圖片自動清理)\n- 支援價格方案的完整替換編輯\n- 原子性操作確保資料一致性\n- 自動錯誤恢復和資源清理\n- 支援課程圖片上傳 (JPEG/PNG/WebP，最大 10MB)\n- 前後台功能分離，提升 API 設計清晰度\n\n**注意事項**：\n- 所有端點都需要教師身份認證\n- 使用 :id 參數（數字），不是 :uuid\n- 狀態管理遵循特定業務規則\n- 更新功能支援部分更新，所有參數皆為選填"
    },
    {
      "name": "公開課程瀏覽 (Public Courses)",
      "item": [
        {
          "name": "公開課程列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/public?keyword=Python&main_category_id=1&sub_category_id=2&city=台北市&sort=newest&page=1&limit=12",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", "public"],
              "query": [
                {
                  "key": "keyword",
                  "value": "Python"
                },
                {
                  "key": "main_category_id",
                  "value": "1"
                },
                {
                  "key": "sub_category_id",
                  "value": "2"
                },
                {
                  "key": "city",
                  "value": "1"
                },
                {
                  "key": "sort",
                  "value": "newest"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "12"
                }
              ]
            },
            "description": "瀏覽公開課程列表，支援搜索和篩選（無需認證）"
          }
        },
        {
          "name": "公開課程詳情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/courses/public/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "courses", "public", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "瀏覽公開課程詳情（無需認證，會增加瀏覽次數）"
          },
          "response": [
            {
              "name": "成功回應 - 包含教師檔案資料",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/courses/public/1",
                  "host": ["{{base_url}}"],
                  "path": ["api", "courses", "public", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"success\",\n    \"message\": \"成功取得課程詳情\",\n    \"data\": {\n        \"course\": {\n            \"id\": 1,\n            \"uuid\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"name\": \"JavaScript 基礎入門課程\",\n            \"content\": \"<p>完整的 JavaScript 基礎教學，適合初學者</p>\",\n            \"main_image\": \"https://firebase.../course-image.jpg\",\n            \"rate\": 4.5,\n            \"review_count\": 12,\n            \"student_count\": 25,\n            \"purchase_count\": 25,\n            \"city\": \"台北市\",\n            \"district\": \"信義區\",\n            \"address\": \"台北市信義區信義路五段7號\",\n            \"survey_url\": \"https://forms.google.com/survey123\",\n            \"purchase_message\": \"請準備筆記本，課程需要大量練習\",\n            \"main_category\": {\n                \"id\": 1,\n                \"name\": \"程式設計\"\n            },\n            \"sub_category\": {\n                \"id\": 2,\n                \"name\": \"前端開發\"\n            },\n            \"created_at\": \"2024-01-15T10:30:00.000Z\"\n        },\n        \"teacher\": {\n            \"id\": 1,\n            \"user\": {\n                \"name\": \"王小明\",\n                \"nick_name\": \"小明老師\",\n                \"avatar_image\": \"https://firebase.../teacher-avatar.jpg\"\n            },\n            \"city\": \"台北市\",\n            \"district\": \"信義區\",\n            \"address\": \"台北市信義區信義路五段7號\",\n            \"introduction\": \"擁有10年程式設計經驗的專業教師\",\n            \"total_students\": 0,\n            \"total_courses\": 0,\n            \"average_rating\": 0\n        },\n        \"price_options\": [\n            {\n                \"id\": 1,\n                \"uuid\": \"price-uuid-1\",\n                \"price\": 2500.00,\n                \"quantity\": 10\n            }\n        ],\n        \"videos\": [],\n        \"files\": [],\n        \"schedule\": [\n            {\n                \"week\": \"週日\",\n                \"date\": \"2024-09-20\",\n                \"slots\": [\n                    { \"time\": \"09:00\", \"status\": \"unavailable\" },\n                    { \"time\": \"10:00\", \"status\": \"available\" },\n                    { \"time\": \"11:00\", \"status\": \"available\" },\n                    { \"time\": \"13:00\", \"status\": \"available\" },\n                    { \"time\": \"14:00\", \"status\": \"available\" },\n                    { \"time\": \"15:00\", \"status\": \"available\" },\n                    { \"time\": \"16:00\", \"status\": \"available\" },\n                    { \"time\": \"17:00\", \"status\": \"available\" },\n                    { \"time\": \"19:00\", \"status\": \"unavailable\" },\n                    { \"time\": \"20:00\", \"status\": \"unavailable\" }\n                ]\n            },\n            {\n                \"week\": \"週一\",\n                \"date\": \"2024-09-21\",\n                \"slots\": [\n                    { \"time\": \"09:00\", \"status\": \"unavailable\" },\n                    { \"time\": \"10:00\", \"status\": \"available\" },\n                    { \"time\": \"11:00\", \"status\": \"reserved\" },\n                    { \"time\": \"13:00\", \"status\": \"reserved\" },\n                    { \"time\": \"14:00\", \"status\": \"reserved\" },\n                    { \"time\": \"15:00\", \"status\": \"reserved\" },\n                    { \"time\": \"16:00\", \"status\": \"available\" },\n                    { \"time\": \"17:00\", \"status\": \"available\" },\n                    { \"time\": \"19:00\", \"status\": \"unavailable\" },\n                    { \"time\": \"20:00\", \"status\": \"unavailable\" }\n                ]\n            }\n        ],\n        \"recent_reviews\": [],\n        \"recommended_courses\": [],\n        \"teacher_certificates\": [\n            {\n                \"id\": 26,\n                \"license_name\": \"Google Cloud Professional Certification\"\n            },\n            {\n                \"id\": 27,\n                \"license_name\": \"AWS Solutions Architect\"\n            }\n        ],\n        \"teacher_work_experiences\": [\n            {\n                \"id\": 29,\n                \"company_name\": \"Google Taiwan\",\n                \"job_title\": \"軟體工程師\",\n                \"start_year\": 2020,\n                \"end_year\": 2023\n            },\n            {\n                \"id\": 30,\n                \"company_name\": \"Microsoft\",\n                \"job_title\": \"資深工程師\",\n                \"start_year\": 2018,\n                \"end_year\": null\n            }\n        ],\n        \"teacher_learning_experiences\": [\n            {\n                \"id\": 22,\n                \"school_name\": \"國立台灣大學\",\n                \"department\": \"資訊工程學系\",\n                \"degree\": \"bachelor\",\n                \"start_year\": 2014,\n                \"end_year\": 2018\n            },\n            {\n                \"id\": 23,\n                \"school_name\": \"國立台灣大學\",\n                \"department\": \"資訊工程研究所\",\n                \"degree\": \"master\",\n                \"start_year\": 2018,\n                \"end_year\": null\n            }\n        ]\n    }\n}"
            }
          ]
        }
      ],
      "description": "公開課程瀏覽相關 API，無需認證即可存取\n\n**實際實作的路由**：\n- GET /api/courses/public - 公開課程列表（支援搜索篩選）\n- GET /api/courses/public/:id - 公開課程詳情\n\n**功能說明**：\n- 無需認證即可存取\n- 支援關鍵字搜索和分類篩選\n- 瀏覽課程詳情會增加瀏覽次數\n- 只顯示已發布的課程"
    },
    {
      "name": "公開教師資料 (Public Teachers)",
      "item": [
        {
          "name": "教師個人檔案",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/:id/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", ":id", "profile"],
              "variable": [
                {
                  "key": "id",
                  "value": "41"
                }
              ]
            },
            "description": "瀏覽教師公開個人檔案"
          }
        },
        {
          "name": "教師課程列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teachers/:id/courses?page=1&limit=12",
              "host": ["{{base_url}}"],
              "path": ["api", "teachers", ":id", "courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "12"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "41"
                }
              ]
            },
            "description": "瀏覽特定教師的課程列表"
          }
        }
      ],
      "description": "公開教師資料相關 API，無需認證即可存取"
    },
    {
      "name": "評價管理 (Reviews)",
      "item": [
        {
          "name": "新增課程評價",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_uuid\": \"course-uuid-here\",\n  \"rate\": 5,\n  \"comment\": \"很棒的課程，老師教學認真！\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reviews",
              "host": ["{{base_url}}"],
              "path": ["api", "reviews"]
            },
            "description": "為課程新增評價"
          }
        },
        {
          "name": "更新評價",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rate\": 4,\n  \"comment\": \"課程內容豐富，但進度稍快\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reviews/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "reviews", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新評價內容"
          }
        },
        {
          "name": "刪除評價",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/reviews/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "reviews", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除評價"
          }
        }
      ],
      "description": "評價管理相關 API，包含新增、更新、刪除評價等功能"
    },
    {
      "name": "收藏功能 (Favorites)",
      "item": [
        {
          "name": "收藏列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/favorites?page=1&limit=12",
              "host": ["{{base_url}}"],
              "path": ["api", "favorites"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "12"
                }
              ]
            },
            "description": "取得使用者收藏課程列表"
          }
        },
        {
          "name": "新增收藏",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_uuid\": \"course-uuid-here\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/favorites",
              "host": ["{{base_url}}"],
              "path": ["api", "favorites"]
            },
            "description": "收藏課程"
          }
        },
        {
          "name": "取消收藏",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/favorites/:course_uuid",
              "host": ["{{base_url}}"],
              "path": ["api", "favorites", ":course_uuid"],
              "variable": [
                {
                  "key": "course_uuid",
                  "value": "course-uuid-here"
                }
              ]
            },
            "description": "取消收藏課程"
          }
        }
      ],
      "description": "課程收藏功能相關 API"
    },
    {
      "name": "影片管理 (Videos)",
      "item": [
        {
          "name": "課程影片列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/course/:course_uuid",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", "course", ":course_uuid"],
              "variable": [
                {
                  "key": "course_uuid",
                  "value": "course-uuid-here"
                }
              ]
            },
            "description": "取得課程影片列表"
          }
        },
        {
          "name": "上傳影片",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "video",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "course_uuid",
                  "value": "course-uuid-here",
                  "type": "text"
                },
                {
                  "key": "title",
                  "value": "第一章：Python 簡介",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "Python 程式語言的基礎介紹",
                  "type": "text"
                },
                {
                  "key": "order_index",
                  "value": "1",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/videos",
              "host": ["{{base_url}}"],
              "path": ["api", "videos"]
            },
            "description": "上傳課程影片"
          }
        },
        {
          "name": "更新影片資訊",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"第一章：Python 進階介紹\",\n  \"description\": \"深入介紹 Python 程式語言的特性\",\n  \"order_index\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/videos/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新影片資訊"
          }
        },
        {
          "name": "刪除影片",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/videos/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "videos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "刪除影片"
          }
        }
      ],
      "description": "課程影片管理相關 API"
    },
    {
      "name": "購物車管理 (Cart)",
      "item": [
        {
          "name": "購物車內容",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/cart",
              "host": ["{{base_url}}"],
              "path": ["api", "cart"]
            },
            "description": "取得購物車內容，包含所有項目詳細資料和摘要統計\n\n**回應資料**：\n- items: 購物車項目列表（包含課程和價格方案詳細資料）\n- summary: 購物車摘要統計（總數量、總金額、有效/無效項目數）\n\n**業務邏輯**：\n- 查詢使用者的所有購物車項目\n- 載入每個項目的課程和價格方案詳細資料\n- 檢查項目有效性（課程是否存在且已發布、價格方案是否存在）\n- 僅有效項目計入總金額\n\n**🆕 新增欄位**：\n- course.main_category: 課程主分類資訊（id, name）\n- course.sub_category: 課程次分類資訊（id, name）"
          }
        },
        {
          "name": "加入購物車",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_id\": 1,\n  \"price_option_id\": 1,\n  \"quantity\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/cart/items",
              "host": ["{{base_url}}"],
              "path": ["api", "cart", "items"]
            },
            "description": "將課程及其價格方案加入購物車\n\n**業務邏輯**：\n- 驗證課程存在且已發布\n- 驗證價格方案存在且屬於該課程\n- 檢查使用者不是該課程的教師\n- 如果購物車中已有相同的課程+價格方案組合，則增加數量\n- 否則新增購物車項目\n\n**請求參數**：\n- course_id: 課程 ID (必填)\n- price_option_id: 價格方案 ID (必填)\n- quantity: 購買數量 (選填，預設為 1)"
          }
        },
        {
          "name": "更新購物車項目",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"quantity\": 2\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/cart/items/:itemId",
              "host": ["{{base_url}}"],
              "path": ["api", "cart", "items", ":itemId"],
              "variable": [
                {
                  "key": "itemId",
                  "value": "1"
                }
              ]
            },
            "description": "更新購物車中指定項目的數量\n\n**業務邏輯**：\n- 驗證購物車項目存在且屬於該使用者\n- 更新項目數量\n- 回傳更新後的項目詳細資料\n\n**路徑參數**：\n- itemId: 購物車項目 ID (必填)\n\n**請求參數**：\n- quantity: 更新後的購買數量 (必填，範圍 1-999)"
          }
        },
        {
          "name": "移除購物車項目",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/cart/items/:itemId",
              "host": ["{{base_url}}"],
              "path": ["api", "cart", "items", ":itemId"],
              "variable": [
                {
                  "key": "itemId",
                  "value": "1"
                }
              ]
            },
            "description": "從購物車中移除指定項目\n\n**業務邏輯**：\n- 驗證購物車項目存在且屬於該使用者\n- 從購物車中刪除該項目\n\n**路徑參數**：\n- itemId: 購物車項目 ID (必填)"
          }
        },
        {
          "name": "清空購物車",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/cart",
              "host": ["{{base_url}}"],
              "path": ["api", "cart"]
            },
            "description": "清空目前使用者的整個購物車，移除所有項目\n\n**業務邏輯**：\n- 刪除使用者購物車中的所有項目\n- 此操作無法復原\n\n**注意事項**：\n- 需要使用者身份認證\n- 操作不可逆，請謹慎使用"
          }
        }
      ],
      "description": "購物車管理相關 API"
    },
    {
      "name": "訂單管理 (Orders)",
      "item": [
        {
          "name": "訂單列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/orders?page=1&limit=10&status=pending",
              "host": ["{{base_url}}"],
              "path": ["api", "orders"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            },
            "description": "取得使用者訂單列表"
          }
        },
        {
          "name": "建立訂單",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cart_item_ids\": [1, 2, 3],\n  \"payment_method\": \"credit_card\",\n  \"shipping_address\": \"台北市信義區信義路五段7號\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders",
              "host": ["{{base_url}}"],
              "path": ["api", "orders"]
            },
            "description": "從購物車建立訂單"
          }
        },
        {
          "name": "訂單詳情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/orders/:uuid",
              "host": ["{{base_url}}"],
              "path": ["api", "orders", ":uuid"],
              "variable": [
                {
                  "key": "uuid",
                  "value": "order-uuid-here"
                }
              ]
            },
            "description": "取得訂單詳細資訊"
          }
        },
        {
          "name": "取消訂單",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"cancelled\",\n  \"cancel_reason\": \"課程時間不符合需求\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/orders/:uuid/cancel",
              "host": ["{{base_url}}"],
              "path": ["api", "orders", ":uuid", "cancel"],
              "variable": [
                {
                  "key": "uuid",
                  "value": "order-uuid-here"
                }
              ]
            },
            "description": "取消訂單"
          }
        }
      ],
      "description": "訂單管理相關 API"
    },
    {
      "name": "購買記錄 (Purchases)",
      "item": [
        {
          "name": "購買記錄列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/purchases?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "purchases"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "取得使用者購買記錄列表"
          }
        },
        {
          "name": "購買記錄詳情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/purchases/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "purchases", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取得購買記錄詳細資訊"
          }
        }
      ],
      "description": "購買記錄管理相關 API"
    },
    {
      "name": "預約管理 (Reservations)",
      "item": [
        {
          "name": "預約列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/reservations?page=1&limit=10&status=pending",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            },
            "description": "取得使用者預約列表"
          }
        },
        {
          "name": "學生查詢自己預約列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/reservations/my-reservations?page=1&per_page=10&course_id=2",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", "my-reservations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "10"
                },
                {
                  "key": "course_id",
                  "value": "2",
                  "description": "可選：篩選特定課程的預約"
                },
                {
                  "key": "status",
                  "value": "reserved",
                  "description": "可選：篩選特定狀態的預約",
                  "disabled": true
                },
                {
                  "key": "date_from",
                  "value": "2025-09-01",
                  "description": "可選：查詢起始日期",
                  "disabled": true
                },
                {
                  "key": "date_to",
                  "value": "2025-09-30",
                  "description": "可選：查詢結束日期", 
                  "disabled": true
                }
              ]
            },
            "description": "學生查詢自己的預約記錄，支援多種篩選條件"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response should have correct structure\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    ",
                  "    if (jsonData.data) {",
                  "        pm.expect(jsonData.data).to.have.property('reservations');",
                  "        pm.expect(jsonData.data).to.have.property('pagination');",
                  "        pm.expect(jsonData.data.pagination).to.have.property('current_page');",
                  "        pm.expect(jsonData.data.pagination).to.have.property('per_page');",
                  "        pm.expect(jsonData.data.pagination).to.have.property('total');",
                  "        pm.expect(jsonData.data.pagination).to.have.property('total_pages');",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"Reservations should be array\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.reservations) {",
                  "        pm.expect(jsonData.data.reservations).to.be.an('array');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "建立預約",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_uuid\": \"course-uuid-here\",\n  \"price_option_id\": 1,\n  \"scheduled_at\": \"2024-01-20T14:00:00.000Z\",\n  \"notes\": \"希望能加強基礎概念的說明\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reservations",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations"]
            },
            "description": "建立課程預約"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('預約建立成功', function () {",
                  "    pm.response.to.have.status(201);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('success');",
                  "    pm.expect(response.message).to.include('預約建立成功');",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data.status).to.eql('pending');",
                  "    pm.expect(response.data).to.have.property('response_deadline');",
                  "    // 保存預約 ID 供後續測試使用",
                  "    pm.globals.set('reservation_id', response.data.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "預約詳情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/reservations/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取得預約詳細資訊"
          }
        },
        {
          "name": "更新預約",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"scheduled_at\": \"2024-01-21T14:00:00.000Z\",\n  \"notes\": \"時間調整為明天同一時間\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reservations/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "更新預約資訊"
          }
        },
        {
          "name": "教師確認預約",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/reservations/:id/confirm",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", ":id", "confirm"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "教師確認學生的預約請求"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('預約確認成功', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('success');",
                  "    pm.expect(response.message).to.include('預約確認成功');",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data.status).to.eql('reserved');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "教師拒絕預約",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"時間衝突，建議重新預約其他時段\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/reservations/:id/reject",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", ":id", "reject"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "教師拒絕學生的預約請求並提供拒絕原因"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('預約拒絕成功', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('success');",
                  "    pm.expect(response.message).to.include('預約已拒絕');",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data.status).to.eql('cancelled');",
                  "    pm.expect(response.data).to.have.property('rejection_reason');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "取消預約",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/reservations/:id",
              "host": ["{{base_url}}"],
              "path": ["api", "reservations", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            },
            "description": "取消預約"
          }
        }
      ],
      "description": "課程預約管理相關 API\n\n📋 **預約流程**：\n1. 學生建立預約（狀態：pending）\n2. 系統設定教師回應期限（隔天預約12小時，其他24小時）\n3. 教師確認/拒絕預約\n4. 超過期限自動過期\n\n🔧 **可用狀態**：pending（待確認）、reserved（已確認）、cancelled（已取消/拒絕）、completed（已完成）"
    },
    {
      "name": "教師後台管理 (Teacher Dashboard)",
      "item": [
        {
          "name": "教師儀表板統計",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teacher-dashboard/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "teacher-dashboard", "stats"]
            },
            "description": "取得教師儀表板統計資料"
          }
        },
        {
          "name": "教師課程管理",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teacher-dashboard/courses?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "teacher-dashboard", "courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "取得教師的課程列表"
          }
        },
        {
          "name": "教師收入統計",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teacher-dashboard/earnings?start_date=2024-01-01&end_date=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["api", "teacher-dashboard", "earnings"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2024-01-01"
                },
                {
                  "key": "end_date",
                  "value": "2024-12-31"
                }
              ]
            },
            "description": "取得教師收入統計"
          }
        },
        {
          "name": "學生管理",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/teacher-dashboard/students?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "teacher-dashboard", "students"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "取得教師的學生列表"
          }
        }
      ],
      "description": "教師後台管理相關 API"
    },
    {
      "name": "管理員功能 (Admin)",
      "item": [
        {
          "name": "認證管理",
          "item": [
            {
              "name": "管理員登入",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "// 測試回應格式",
                      "pm.test('管理員登入成功', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "// 自動儲存管理員 token",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.access_token) {",
                      "        pm.globals.set('admin_token', response.data.access_token);",
                      "        pm.collectionVariables.set('admin_token', response.data.access_token);",
                      "        console.log('✅ 管理員 token 已自動儲存');",
                      "        ",
                      "        // 儲存管理員資訊",
                      "        if (response.data.admin) {",
                      "            pm.globals.set('admin_id', response.data.admin.id);",
                      "            pm.globals.set('admin_username', response.data.admin.username);",
                      "            console.log('✅ 管理員資訊已儲存');",
                      "        }",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123456\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/login",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "login"]
                },
                "description": "管理員登入，返回 JWT token"
              }
            },
            {
              "name": "建立管理員帳號",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "// 檢查回應狀態",
                      "pm.test('Status code is 201', function () {",
                      "  pm.response.to.have.status(201);",
                      "});",
                      "",
                      "// 檢查回應格式",
                      "pm.test('Response has admin data', function () {",
                      "  const jsonData = pm.response.json();",
                      "  pm.expect(jsonData).to.have.property('status', 'success');",
                      "  pm.expect(jsonData).to.have.property('data');",
                      "  pm.expect(jsonData.data).to.have.property('admin');",
                      "  pm.expect(jsonData.data.admin).to.have.property('id');",
                      "  pm.expect(jsonData.data.admin).to.have.property('username');",
                      "  pm.expect(jsonData.data.admin).to.have.property('name');",
                      "  pm.expect(jsonData.data.admin).to.have.property('email');",
                      "  pm.expect(jsonData.data.admin).to.have.property('role');",
                      "});",
                      "",
                      "// 檢查是否正確設置管理員資料",
                      "pm.test('Admin data is correct', function () {",
                      "  const jsonData = pm.response.json();",
                      "  const admin = jsonData.data.admin;",
                      "  pm.expect(admin.username).to.equal('admin');",
                      "  pm.expect(admin.name).to.equal('系統管理員');",
                      "  pm.expect(admin.email).to.equal('admin@example.com');",
                      "  pm.expect(admin.role).to.equal('admin');",
                      "  pm.expect(admin.last_login_at).to.be.null;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin123456\",\n  \"name\": \"系統管理員\",\n  \"email\": \"admin@example.com\",\n  \"role\": \"admin\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/create",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "create"]
                },
                "description": "建立新的管理員帳號 - 用於系統初始化或建立新管理員"
              }
            },
            {
              "name": "管理員登出",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/logout",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "logout"]
                },
                "description": "管理員登出"
              }
            },
            {
              "name": "獲取管理員資訊",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/profile",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "profile"]
                },
                "description": "獲取當前登入管理員的基本資訊"
              }
            }
          ]
        },
        {
          "name": "教師申請管理",
          "item": [
            {
              "name": "獲取教師申請列表",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/teacher-applications?status=pending&page=1&limit=20",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "teacher-applications"],
                  "query": [
                    {
                      "key": "status",
                      "value": "pending",
                      "description": "篩選狀態：pending, approved, rejected (可選)"
                    },
                    {
                      "key": "page",
                      "value": "1",
                      "description": "頁碼，預設 1"
                    },
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "每頁數量，預設 20，最大 100"
                    }
                  ]
                },
                "description": "獲取教師申請列表，支援狀態篩選和分頁"
              }
            },
            {
              "name": "核准教師申請",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/teachers/:teacherId/approve",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "teachers", ":teacherId", "approve"],
                  "variable": [
                    {
                      "key": "teacherId",
                      "value": "1",
                      "description": "教師 ID"
                    }
                  ]
                },
                "description": "核准教師申請，自動將使用者角色從 TEACHER_PENDING 升級為 TEACHER"
              }
            },
            {
              "name": "拒絕教師申請",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"申請資料不完整，請補充相關證明文件\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/teachers/:teacherId/reject",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "teachers", ":teacherId", "reject"],
                  "variable": [
                    {
                      "key": "teacherId",
                      "value": "1",
                      "description": "教師 ID"
                    }
                  ]
                },
                "description": "拒絕教師申請，必須提供拒絕原因"
              }
            }
          ]
        },
        {
          "name": "課程申請管理",
          "item": [
            {
              "name": "獲取課程申請列表",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/course-applications?status=submitted&page=1&per_page=20",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "course-applications"],
                  "query": [
                    {
                      "key": "status",
                      "value": "submitted",
                      "description": "篩選狀態：submitted(待審核), approved(已核准), rejected(已拒絕), draft(草稿), published(已發布), archived(已封存) (可選)"
                    },
                    {
                      "key": "page",
                      "value": "1",
                      "description": "頁碼，預設 1"
                    },
                    {
                      "key": "per_page",
                      "value": "20",
                      "description": "每頁數量，預設 20，最大 100"
                    },
                    {
                      "key": "sort",
                      "value": "newest",
                      "description": "排序方式：newest(最新), oldest(最舊)，預設 newest",
                      "disabled": true
                    }
                  ]
                },
                "description": "獲取課程申請列表，支援課程狀態篩選和分頁。預設顯示需要審核的課程（submitted, approved, rejected 狀態）。"
              }
            },
            {
              "name": "獲取課程申請列表 - 待審核",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/course-applications?status=submitted",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "course-applications"],
                  "query": [
                    {
                      "key": "status",
                      "value": "submitted"
                    }
                  ]
                },
                "description": "獲取所有待審核的課程申請"
              }
            },
            {
              "name": "獲取課程申請列表 - 已核准",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/course-applications?status=approved",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "course-applications"],
                  "query": [
                    {
                      "key": "status",
                      "value": "approved"
                    }
                  ]
                },
                "description": "獲取所有已核准的課程申請"
              }
            },
            {
              "name": "獲取課程申請列表 - 已拒絕",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/admin/course-applications?status=rejected",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "course-applications"],
                  "query": [
                    {
                      "key": "status",
                      "value": "rejected"
                    }
                  ]
                },
                "description": "獲取所有已拒絕的課程申請"
              }
            },
            {
              "name": "核准課程申請",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/courses/:courseId/approve",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "courses", ":courseId", "approve"],
                  "variable": [
                    {
                      "key": "courseId",
                      "value": "1",
                      "description": "課程 ID"
                    }
                  ]
                },
                "description": "核准課程申請"
              }
            },
            {
              "name": "拒絕課程申請",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"課程內容不符合平台規範\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/admin/courses/:courseId/reject",
                  "host": ["{{base_url}}"],
                  "path": ["api", "admin", "courses", ":courseId", "reject"],
                  "variable": [
                    {
                      "key": "courseId",
                      "value": "1",
                      "description": "課程 ID"
                    }
                  ]
                },
                "description": "拒絕課程申請，必須提供拒絕原因"
              }
            }
          ]
        }
      ],
      "description": "管理員功能相關 API，需要管理員權限\n\n**實際實作的 API 路由：**\n- POST /api/admin/login - 管理員登入\n- POST /api/admin/create - 建立管理員帳號\n- POST /api/admin/logout - 管理員登出\n- GET /api/admin/profile - 獲取管理員資訊\n- GET /api/admin/teacher-applications - 獲取教師申請列表\n- POST /api/admin/teachers/:teacherId/approve - 核准教師申請\n- POST /api/admin/teachers/:teacherId/reject - 拒絕教師申請\n- POST /api/admin/courses/:courseId/approve - 核准課程申請\n- POST /api/admin/courses/:courseId/reject - 拒絕課程申請\n\n**注意事項：**\n- 建立管理員不需要認證（系統初始化用）\n- 其他 API 都需要 admin 身份認證\n- 管理員登入使用 username/password，不是 email/password\n- 審核教師申請會自動處理角色升級（TEACHER_PENDING → TEACHER）"
    },
    {
      "name": "� 使用者頭像 (User Avatar)",
      "item": [
        {
          "name": "📤 上傳頭像",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "multipart/form-data",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": [],
                  "description": "頭像檔案 (支援 JPEG, JPG, PNG, WebP，最大 5MB)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload/avatar",
              "host": ["{{base_url}}"],
              "path": ["api", "upload", "avatar"]
            },
            "description": "上傳使用者頭像到 Firebase Storage\n\n**新的業務規則**：\n✅ 使用者只能維護一個頭像\n✅ 上傳新頭像會自動刪除 Firebase Storage 中的舊頭像\n✅ Google 登入用戶的頭像不會從 Google 伺服器刪除，但會在資料庫中更新為新頭像\n\n**支援格式**：\n- 圖片格式: JPEG, JPG, PNG, WebP\n- ❌ 不支援: SVG, GIF, BMP 等其他格式\n\n**限制**：\n- 最大檔案大小: 5MB\n- 每個使用者只能有一個頭像\n\n**業務邏輯**：\n- 驗證使用者已登入\n- 驗證檔案格式和大小\n- 自動刪除舊頭像（如果存在且不是 Google 頭像）\n- 上傳新頭像到 Firebase Storage\n- 更新使用者頭像 URL\n\n**錯誤處理**：\n- 不支援格式會顯示具體格式錯誤訊息\n- 檔案過大會顯示當前大小和限制\n- 舊頭像清理失敗不會影響新頭像上傳"
          },
          "response": []
        },
        {
          "name": "🗑️ 刪除頭像",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/upload/avatar",
              "host": ["{{base_url}}"],
              "path": ["api", "upload", "avatar"]
            },
            "description": "刪除使用者頭像\n\n業務邏輯：\n- 驗證使用者已登入\n- 從 Firebase Storage 刪除頭像檔案\n- 清除使用者的頭像 URL"
          },
          "response": []
        }
      ],
      "description": "使用者頭像管理相關 API\n\n⚠️ 注意事項：\n- 需要 JWT 認證\n- 需要設定 Firebase Storage 環境變數\n- 支援的檔案格式：JPEG, JPG, PNG, WebP\n- 檔案大小限制：最大 5MB\n- 使用者只能維護一個頭像，上傳新頭像會自動刪除舊頭像\n- Google 登入用戶的頭像無法被刪除，只會清除資料庫記錄"
    },
    {
      "name": "�📁 檔案上傳 (File Upload)",
      "item": [
        {
          "name": "📤 上傳單個檔案",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "category",
                  "value": "documents",
                  "type": "text",
                  "description": "檔案分類 (可選)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/files/upload",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "upload"]
            },
            "description": "上傳單個檔案到 Firebase Storage\n\n支援格式：\n- 圖片: JPEG, PNG, GIF, WebP\n- 文件: PDF, DOC, DOCX, TXT\n\n限制：\n- 最大檔案大小: 10MB\n- 最大檔案數量: 5個"
          },
          "response": []
        },
        {
          "name": "📤 上傳多個檔案",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "files",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "category",
                  "value": "images",
                  "type": "text",
                  "description": "檔案分類 (可選)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/files/upload",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "upload"]
            },
            "description": "上傳多個檔案到 Firebase Storage (最多5個檔案)"
          },
          "response": []
        },
        {
          "name": "🗑️ 刪除檔案",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileUrl\": \"gs://your-bucket/uploads/documents/filename.pdf\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/files/delete",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "delete"]
            },
            "description": "從 Firebase Storage 刪除指定檔案\n\n請求參數：\n- fileUrl: Firebase Storage 檔案 URL (gs://格式)"
          },
          "response": []
        },
        {
          "name": "📄 取得檔案資訊",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/files/metadata/{{encoded_file_url}}",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "metadata", "{{encoded_file_url}}"]
            },
            "description": "取得指定檔案的詳細資訊\n\n路徑參數：\n- encoded_file_url: URL 編碼的 Firebase Storage 檔案 URL\n\n使用方式：\n1. 先將檔案 URL 進行 URL 編碼\n2. 將編碼後的 URL 作為路徑參數"
          },
          "response": []
        },
        {
          "name": "🔗 生成下載連結",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileUrl\": \"gs://your-bucket/uploads/documents/filename.pdf\",\n  \"expiresInMinutes\": 60\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/files/download-url",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "download-url"]
            },
            "description": "為私有檔案生成帶有過期時間的下載連結\n\n請求參數：\n- fileUrl: Firebase Storage 檔案 URL (gs://格式)\n- expiresInMinutes: 連結有效期限（分鐘），預設60分鐘"
          },
          "response": []
        },
        {
          "name": "🧪 測試 Firebase 配置",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('檢查 Firebase 配置狀態', function () {",
                  "    if (pm.response.code === 503) {",
                  "        pm.test('Firebase 服務不可用 - 這是正常的，如果沒有設定環境變數', function () {",
                  "            var jsonData = pm.response.json();",
                  "            pm.expect(jsonData.error).to.eql('SERVICE_UNAVAILABLE');",
                  "            console.log('❌ Firebase 未配置，請設定以下環境變數：');",
                  "            console.log('   FIREBASE_SERVICE_ACCOUNT_PATH');",
                  "            console.log('   FIREBASE_STORAGE_BUCKET');",
                  "        });",
                  "    } else if (pm.response.code === 401) {",
                  "        console.log('⚠️  需要先登入取得 token');",
                  "    } else {",
                  "        pm.test('Firebase 服務可用', function () {",
                  "            pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "            console.log('✅ Firebase 配置正確');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": []
            },
            "url": {
              "raw": "{{base_url}}/api/files/upload",
              "host": ["{{base_url}}"],
              "path": ["api", "files", "upload"]
            },
            "description": "測試 Firebase 配置是否正確\n\n- 如果返回 503: Firebase 未配置（正常情況）\n- 如果返回 401: 需要登入\n- 如果返回 400: Firebase 已配置但沒有檔案（正常）"
          },
          "response": []
        }
      ],
      "description": "檔案上傳相關 API，使用 Firebase Storage 進行雲端檔案儲存\n\n⚠️ 注意事項：\n- 需要設定 Firebase 環境變數才能使用\n- 所有端點都需要 JWT 認證\n- 支援多種檔案格式和大小限制"
    }
  ]
}